<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="objetMapper">
<!-- 오브제 전체 리스트   -->
<select id="selectObjetAll" resultType="Objet">
 select * from objet order by OBJETREGIDATE desc
 </select>
 
 <!-- 작가 전체 리스트   -->
<select id="selectArtistAll" resultType="Artist">
 select * from objet a join users b on a.userid = b.userid order by objetregidate desc
</select>
 
<!-- 오브제 검색 결과 리스트(전시/작가)  -->
<select id="objetSearchList" resultType="Objet">
 select * from objet where objettitle like '%' || #{objettitle} || '%' or objetintro like #{objetintro} order by #{objetstartdate} asc
</select>
<select id="artistSearchList" resultType="Artist">
 select * form objet a join users b on a.userid = b.userid where a.userid like '%' || #{userid} || '%' or nickname like '%' || #{nickname} || '%' order by #{objetstartdate} asc
</select> 
 
 <!-- 오브제 단일   -->
 <select id="selectObjetOne" resultType="Objet">
 select * from objet where objetno = #{objetno}
 </select>
 
 <!-- 전시 신고 -->
 <insert id="insertObjetReport" parameterType="ReportBoard">
 	insert into reportboard values ( #{originno}, #{reportedb}, #{reporterb}, sysdate, #{reportreason}, #{reportbtype}) 
 </insert>
 
 <!-- 한줄평 리스트  -->
 <select id="selectReview" resultType="Review">
 select * from review order by revdate desc
 </select>
<!-- 한줄평 등록 -->
<insert id="insertReview" parameterType="Review">
	insert into review values ( #{userid}, #{objetno}, #{revcontent}, #{revstars}, #{revgood}, #{revhate}, #{revdate}) 
</insert>
<!-- 한줄평 수정 -->
<update id="updateReview" parameterType="Review">
	update review set revcontent = #{revcontent}, revstars = #{revstars}, revgood = #{revgood}, revhate = #{revhate}, revdate = #{revdate} where userid = #{userid}
</update>
<!-- 한줄평 삭제 -->
<delete id="deleteReview" parameterType="Review">
	delete from review where userid = #{userid} 
</delete>
<!-- 한줄평 신고 -->
 <insert id="insertReviewReport" parameterType="ReportBoard">
 	insert into reportboard values ( #{originno}, #{reportedb}, #{reporterb}, sysdate, #{reportreason}, #{reportbtype}) 
 </insert>
</mapper>
